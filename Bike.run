<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bike Jump Game</title>
<style>
  body, html {
    margin: 0; padding: 0; overflow: hidden;
    background: black;
    touch-action: manipulation;
    user-select: none;
    font-family: Arial, sans-serif;
  }
  #gameCanvas {
    display: block;
    margin: 0 auto;
    background: black;
  }
  #jumpButton {
    position: fixed;
    bottom: 40px;
    right: 40px;
    width: 90px;
    height: 90px;
    border-radius: 50%;
    background: #3282ff;
    border: 4px solid white;
    opacity: 0.8;
    touch-action: manipulation;
    user-select: none;
    z-index: 10;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="800" height="400"></canvas>
<button id="jumpButton" aria-label="Jump Button"></button>

<script>
(() => {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const jumpButton = document.getElementById('jumpButton');

  const WIDTH = canvas.width;
  const HEIGHT = canvas.height;

  // Game variables
  let bike = {
    x: 100,
    y: HEIGHT - 110,
    width: 70,
    height: 50,
    yVelocity: 0,
    gravity: 0.9,
    jumpPower: -18,
    isJumping: false
  };

  let cactusList = [];
  const cactusSpeed = 8;
  let score = 0;
  let gameOver = false;

  // Create cactus obstacle
  function createCactus() {
    const type = Math.random() < 0.5 ? 'small' : 'big';
    if(type === 'small'){
      return {x: WIDTH + 30, y: HEIGHT - 65, width: 25, height: 40};
    } else {
      return {x: WIDTH + 30, y: HEIGHT - 85, width: 35, height: 60};
    }
  }

  // Add initial cactus
  cactusList.push(createCactus());

  // Draw the sun (yellow circle)
  function drawSun(){
    ctx.beginPath();
    ctx.fillStyle = 'yellow';
    ctx.shadowColor = 'yellow';
    ctx.shadowBlur = 20;
    ctx.arc(WIDTH - 100, 80, 50, 0, Math.PI * 2);
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  // Draw bike with rider
  function drawBike(){
    // Wheels
    ctx.lineWidth = 4;
    ctx.strokeStyle = 'gray';
    ctx.beginPath();
    ctx.arc(bike.x + 20, bike.y + 40, 18, 0, Math.PI * 2);
    ctx.stroke();
    ctx.beginPath();
    ctx.arc(bike.x + 70, bike.y + 40, 18, 0, Math.PI * 2);
    ctx.stroke();

    // Frame
    ctx.strokeStyle = 'white';
    ctx.beginPath();
    ctx.moveTo(bike.x + 20, bike.y + 40);
    ctx.lineTo(bike.x + 50, bike.y + 20);
    ctx.lineTo(bike.x + 70, bike.y + 40);
    ctx.moveTo(bike.x + 50, bike.y + 20);
    ctx.lineTo(bike.x + 50, bike.y);
    ctx.stroke();

    // Rider
    ctx.fillStyle = 'white';
    ctx.beginPath();
    ctx.arc(bike.x + 50, bike.y - 15, 10, 0, Math.PI * 2);
    ctx.fill();

    ctx.lineWidth = 4;
    ctx.beginPath();
    ctx.moveTo(bike.x + 50, bike.y - 5);
    ctx.lineTo(bike.x + 50, bike.y + 15);
    ctx.stroke();
  }

  // Draw cactus obstacles
  function drawCactus(cactus){
    ctx.fillStyle = 'green';
    ctx.fillRect(cactus.x, cactus.y, cactus.width, cactus.height);
  }

  // Draw score
  function drawScore(){
    ctx.fillStyle = 'white';
    ctx.font = '28px Arial';
    ctx.fillText(`Score: ${score}`, 20, 40);
  }

  // Collision detection between rectangles
  function isColliding(r1, r2){
    return !(r2.x > r1.x + r1.width ||
             r2.x + r2.width < r1.x ||
             r2.y > r1.y + r1.height ||
             r2.y + r2.height < r1.y);
  }

  // Reset game
  function resetGame(){
    cactusList = [createCactus()];
    bike.y = HEIGHT - 110;
    bike.yVelocity = 0;
    bike.isJumping = false;
    score = 0;
    gameOver = false;
  }

  // Game loop
  function gameLoop(){
    ctx.clearRect(0, 0, WIDTH, HEIGHT);

    // Background & sun
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, WIDTH, HEIGHT);
    drawSun();

    if(!gameOver){
      // Bike physics
      bike.yVelocity += bike.gravity;
      bike.y += bike.yVelocity;

      if(bike.y > HEIGHT - 110){
        bike.y = HEIGHT - 110;
        bike.yVelocity = 0;
        bike.isJumping = false;
      }

      // Move cactuses
      for(let i = 0; i < cactusList.length; i++){
        let cactus = cactusList[i];
        cactus.x -= cactusSpeed;

        // Remove off screen
        if(cactus.x + cactus.width < 0){
          cactusList.splice(i,1);
          i--;
          score++;
          // Add new cactus
          cactusList.push(createCactus());
        }
      }

      // Draw everything
      drawBike();
      cactusList.forEach(drawCactus);
      drawScore();

      // Collision detection
      let bikeRect = {x: bike.x, y: bike.y, width: bike.width, height: bike.height};
      for(let cactus of cactusList){
        let cactusRect = {x: cactus.x, y: cactus.y, width: cactus.width, height: cactus.height};
        if(isColliding(bikeRect, cactusRect)){
          gameOver = true;
        }
      }

    } else {
      // Game over screen
      ctx.fillStyle = 'red';
      ctx.font = '32px Arial';
      ctx.fillText('GAME OVER - Tap to Restart', WIDTH/2 - 170, HEIGHT/2);
      ctx.fillStyle = 'white';
      ctx.font = '28px Arial';
      ctx.fillText(`Final Score: ${score}`, WIDTH/2 - 90, HEIGHT/2 + 50);
    }

    requestAnimationFrame(gameLoop);
  }

  // Jump action
  function jump(){
    if(!gameOver && !bike.isJumping){
      bike.yVelocity = bike.jumpPower;
      bike.isJumping = true;
    }
  }

  // Event listeners
  jumpButton.addEventListener('touchstart', (e) => {
    e.preventDefault();
    jump();
  });
  jumpButton.addEventListener('mousedown', (e) => {
    e.preventDefault();
    jump();
  });

  canvas.addEventListener('touchstart', (e) => {
    if(gameOver){
      e.preventDefault();
      resetGame();
    }
  });

  canvas.addEventListener('mousedown', (e) => {
    if(gameOver){
      e.preventDefault();
      resetGame();
    }
  });

  // Start the game loop
  gameLoop();

})();
</script>

</body>
</html>
